snapshots["generates the expected postgresql query 1"] = <<-SNAP
SELECT \"delayed_jobs\".*
  FROM \"delayed_jobs\"
  WHERE (\"delayed_jobs\".\"run_at\" <= '2025-11-10 17:20:13'
    AND (\"delayed_jobs\".\"locked_at\" IS NULL OR \"delayed_jobs\".\"locked_at\" < '2025-11-10 16:59:43') OR \"delayed_jobs\".\"locked_by\" = 'worker1')
    AND \"delayed_jobs\".\"failed_at\" IS NULL
  ORDER BY \"delayed_jobs\".\"priority\" ASC, \"delayed_jobs\".\"run_at\" ASC
SNAP

snapshots["generates the expected postgresql query for one queue 1"] = <<-SNAP
SELECT \"delayed_jobs\".*
  FROM \"delayed_jobs\"
  WHERE (\"delayed_jobs\".\"run_at\" <= '2025-11-10 17:20:13'
    AND (\"delayed_jobs\".\"locked_at\" IS NULL OR \"delayed_jobs\".\"locked_at\" < '2025-11-10 16:59:43') OR \"delayed_jobs\".\"locked_by\" = 'worker1')
    AND \"delayed_jobs\".\"failed_at\" IS NULL
    AND \"delayed_jobs\".\"queue\" = 'default'
  ORDER BY \"delayed_jobs\".\"priority\" ASC, \"delayed_jobs\".\"run_at\" ASC
SNAP

snapshots["generates the expected postgresql query for multiple queue 1"] = <<-SNAP
SELECT \"delayed_jobs\".*
  FROM \"delayed_jobs\"
  WHERE (\"delayed_jobs\".\"run_at\" <= '2025-11-10 17:20:13'
    AND (\"delayed_jobs\".\"locked_at\" IS NULL OR \"delayed_jobs\".\"locked_at\" < '2025-11-10 16:59:43') OR \"delayed_jobs\".\"locked_by\" = 'worker1')
    AND \"delayed_jobs\".\"failed_at\" IS NULL
    AND \"delayed_jobs\".\"queue\" IN ('default', 'mailers', 'tracking')
  ORDER BY \"delayed_jobs\".\"priority\" ASC, \"delayed_jobs\".\"run_at\" ASC
SNAP

snapshots["generates the expected sqlite3 query 1"] = <<-SNAP
SELECT \"delayed_jobs\".*
  FROM \"delayed_jobs\"
  WHERE (\"delayed_jobs\".\"run_at\" <= '2025-11-10 17:20:13'
    AND (\"delayed_jobs\".\"locked_at\" IS NULL OR \"delayed_jobs\".\"locked_at\" < '2025-11-10 16:59:43') OR \"delayed_jobs\".\"locked_by\" = 'worker1')
    AND \"delayed_jobs\".\"failed_at\" IS NULL
  ORDER BY \"delayed_jobs\".\"priority\" ASC, \"delayed_jobs\".\"run_at\" ASC
SNAP

snapshots["generates the expected sqlite3 query for one queue 1"] = <<-SNAP
SELECT \"delayed_jobs\".*
  FROM \"delayed_jobs\"
  WHERE (\"delayed_jobs\".\"run_at\" <= '2025-11-10 17:20:13'
    AND (\"delayed_jobs\".\"locked_at\" IS NULL OR \"delayed_jobs\".\"locked_at\" < '2025-11-10 16:59:43') OR \"delayed_jobs\".\"locked_by\" = 'worker1')
    AND \"delayed_jobs\".\"failed_at\" IS NULL
    AND \"delayed_jobs\".\"queue\" = 'default'
  ORDER BY \"delayed_jobs\".\"priority\" ASC, \"delayed_jobs\".\"run_at\" ASC
SNAP

snapshots["generates the expected sqlite3 query for multiple queue 1"] = <<-SNAP
SELECT \"delayed_jobs\".*
  FROM \"delayed_jobs\"
  WHERE (\"delayed_jobs\".\"run_at\" <= '2025-11-10 17:20:13'
    AND (\"delayed_jobs\".\"locked_at\" IS NULL OR \"delayed_jobs\".\"locked_at\" < '2025-11-10 16:59:43') OR \"delayed_jobs\".\"locked_by\" = 'worker1')
    AND \"delayed_jobs\".\"failed_at\" IS NULL
    AND \"delayed_jobs\".\"queue\" IN ('default', 'mailers', 'tracking')
  ORDER BY \"delayed_jobs\".\"priority\" ASC, \"delayed_jobs\".\"run_at\" ASC
SNAP

snapshots["generates the expected mysql2 query 1"] = <<-SNAP
SELECT `delayed_jobs`.*
  FROM `delayed_jobs`
  WHERE (`delayed_jobs`.`run_at` <= '2025-11-10 17:20:13'
    AND (`delayed_jobs`.`locked_at` IS NULL OR `delayed_jobs`.`locked_at` < '2025-11-10 16:59:43') OR `delayed_jobs`.`locked_by` = 'worker1')
    AND `delayed_jobs`.`failed_at` IS NULL
  ORDER BY `delayed_jobs`.`priority` ASC, `delayed_jobs`.`run_at` ASC
SNAP

snapshots["generates the expected mysql2 query for one queue 1"] = <<-SNAP
SELECT `delayed_jobs`.*
  FROM `delayed_jobs`
  WHERE (`delayed_jobs`.`run_at` <= '2025-11-10 17:20:13'
    AND (`delayed_jobs`.`locked_at` IS NULL OR `delayed_jobs`.`locked_at` < '2025-11-10 16:59:43') OR `delayed_jobs`.`locked_by` = 'worker1')
    AND `delayed_jobs`.`failed_at` IS NULL
    AND `delayed_jobs`.`queue` = 'default'
  ORDER BY `delayed_jobs`.`priority` ASC, `delayed_jobs`.`run_at` ASC
SNAP

snapshots["generates the expected mysql2 query for multiple queue 1"] = <<-SNAP
SELECT `delayed_jobs`.*
  FROM `delayed_jobs`
  WHERE (`delayed_jobs`.`run_at` <= '2025-11-10 17:20:13'
    AND (`delayed_jobs`.`locked_at` IS NULL OR `delayed_jobs`.`locked_at` < '2025-11-10 16:59:43') OR `delayed_jobs`.`locked_by` = 'worker1')
    AND `delayed_jobs`.`failed_at` IS NULL
    AND `delayed_jobs`.`queue` IN ('default', 'mailers', 'tracking')
  ORDER BY `delayed_jobs`.`priority` ASC, `delayed_jobs`.`run_at` ASC
SNAP
